maybe there's just an issue with the way that map is implemented - maybe have to write separate tests to understand what's going wrong